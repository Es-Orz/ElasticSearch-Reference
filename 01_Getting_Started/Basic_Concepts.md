# 基本概念
Elasticsearch有一些核心概念。 从一开始就理解这些概念将极大地帮助有效学习整个过程。

## Near Realtime(NRT)近实时
Elasticsearch是一个近实时(Near Realtime)的搜索平台。 这意味着从建立索引文档到可搜索的时间都有一个小的延迟（通常是1s）。
## Cluster 集群
群集是(cluster)一个或多个节点（Node）相同应用的集合，它们一起保存整个数据，并在所有节点上提供联合索引和搜索功能。 一个集群由一个唯一的名字来标识，默认是“elasticsearch”。 这个名字很重要，因为如果节点设置为通过名字加入集群，节点只能是集群的一部分。

确保不要在不同的环境中重复使用相同的群集名称，否则可能会导致节点加入错误的群集。 例如，您可以使用logging-dev，logging-stage和logging-prod来开发，分段和生产集群。

请注意，有一个只有一个节点的集群是完全正确的。 此外，您也可能拥有多个独立的群集，每个群集都有自己的唯一群集名称。
## Node 结点
节点是集群一部分的单个应用，存储数据并参与集群的索引和搜索功能。就像一个集群一样，一个节点由一个名字来标识，默认情况下它是一个在启动时分配给节点的随机通用唯一标识符（UUID）。如果您不需要默认值，您可以定义任何您想要的节点名称（node.name）。此名称对于管理目的非常重要，您需要确定网络中的哪些服务器对应于Elasticsearch群集中的哪些节点。

可以将节点配置为按集群名称加入特定的集群。默认情况下，每个节点都设置为加入一个名为elasticsearch的集群，这意味着如果启动网络中的许多节点，并假设它们可以互相发现，它们将自动形成并加入一个名为elasticsearch的集群。

在单个群集中，您可以拥有任意数量的节点。而且，如果网络中没有其他Elasticsearch节点正在运行，则默认情况下启动单个节点会形成一个名为elasticsearch的单节点集群
## Index 索引
索引（index）是具有相似特征的文档(document)的集合。相当于RDBMS中的schema 例如，您可以拥有客户数据的索引，产品目录是另一个索引以及订单数据又是另一个索引。 索引由名称标识（**必须全部为小写**），该名称用于在对索引文档进行索引，搜索，更新和删除操作时引用索引。

在单个群集中，您可以根据需要定义多个索引。
## Type 类型
在一个索引（index）内，您可以定义一个或多个类型(type),相当于RDBMS中的table。类型是您的索引的逻辑类别/分区，其语义完全取决于您。 通常，为具有一组公共字段的文档定义类型。 例如，假设您运行博客平台并将所有数据存储在单个索引中。 在此索引中，您可以为用户数据定义类型，为博客数据定义另一种类型，为定义数据定义另一种类型。
## Document  文档
文档是可被索引的基本信息单元,相当于RDBMS中的row。 例如，您可以为单个客户提供文档，为单个产品提供另一个文档，为单个订单提供另一个文档。 这个文档是用JSON（JavaScript Object Notation）表示的，它是一个无处不在的互联网数据交换格式。

在索引/类型(index/type)中，您可以根据需要存储多个文档。 请注意，尽管文档实际上驻留在索引中，但实际上***文档必须被索引/分配给索引内的类型***。
## Shards & Replicas 分片 & 复制分片（副本）

索引可能潜在地存储大量数据，这些数据可能会超出单个节点的硬件限制。 例如，占用1TB磁盘空间的十亿份文档的单个索引可能不适合单个节点的磁盘，或者可能太慢而无法单独为来自单个节点的搜索请求提供服务。

为了解决这个问题，Elasticsearch提供了将索引细分为多个分片（shard）的能力。 当你创建一个索引时，你可以简单地定义你想要的分片数量。 每个分片本身都是一个功能齐全且独立的“索引”（lucene的实例），可以在集群中的任何节点上进行托管。

分片的重要的两个主要原因：

* 它允许您水平分割/缩放您的内容量
* 它允许您跨越分片（可能在多个节点上）分发和并行化操作，从而提高性能/吞吐量分片如何分布的机制以及文档如何聚合回搜索请求完全由Elasticsearch管理，对用户来说是透明的。

分片如何分布的机制以及文档如何聚合回搜索请求完全由Elasticsearch管理，对于用户来说是透明的。

在任何时候都可能出现故障的网络/云环境中，非常有用并强烈建议有一个故障切换机制，以防碎片/节点以某种方式脱机或因任何原因而消失。为此，Elasticsearch允许您将索引分片的一个或多个副本分成所谓的副本分片或副本。

复制(replicas)很重要，主要有两个原因：

* 它在分片/节点失败的情况下提供高可用性（partion tolerance）。由于这个原因，重要的是要注意，副本分片永远不会被分配在与从其复制的原始/主分片相同的节点上。
* 它允许您扩展您的搜索量/吞吐量，因为搜索可以在所有副本上并行执行。
总而言之，每个索引可以分成多个分片。索引也可以被复制为零（意味着没有复制品）或更多次。一旦被复制，每个索引将具有主要分片（从中复制的原始分片）和副本分片（主要碎片的副本）。在创建索引时，可以为每个索引定义分片和副本的数量。创建索引之后，您可以随时更改动态副本的数量，但不能随意更改碎片的数量。

默认情况下，Elasticsearch中的每个索引都分配了5个主分片和1个副本，这意味着如果您的集群中至少有两个节点，则索引将包含5个主分片和另外5个副本分片（1个完整副本）每个索引10个分片。

> ### tips
> 每个Elasticsearch分片是一个Lucene索引。 您可以在单个Lucene索引中拥有最大数量的文档。 从[LUCENE-5843](https://issues.apache.org/jira/browse/LUCENE-5843)开始，限制是2,147,483,519（= Integer.MAX_VALUE - 128）文件。 您可以使用_cat/shards api监视分片大小。